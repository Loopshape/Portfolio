(function(e){function r(r,i){var s=this,o=r.add(s),u=e(window),a,f,l,c=e.tools.expose&&(i.mask||i.expose),h=Math.random().toString().slice(10);if(c){if(typeof c=="string"){c={color:c}}c.closeOnClick=c.closeOnEsc=false}var p=i.target||r.attr("rel");f=p?e(p):null||r;if(!f.length){throw"Could not find Overlay: "+p}if(r&&r.index(f)==-1){r.click(function(e){s.load(e);return e.preventDefault()})}e.extend(s,{load:function(r){if(s.isOpened()){return s}var a=n[i.effect];if(!a){throw'Overlay: cannot find effect : "'+i.effect+'"'}if(i.oneInstance){e.each(t,function(){this.close(r)})}r=r||e.Event();r.type="onBeforeLoad";o.trigger(r);if(r.isDefaultPrevented()){return s}l=true;if(c){e(f).expose(c)}var p=i.top,d=i.left,v=f.outerWidth({margin:true}),m=f.outerHeight({margin:true});if(typeof p=="string"){p=p=="center"?Math.max((u.height()-m)/2,0):parseInt(p,10)/100*u.height()}if(d=="center"){d=Math.max((u.width()-v)/2,0)}a[0].call(s,{top:p,left:d},function(){if(l){r.type="onLoad";o.trigger(r)}});if(c&&i.closeOnClick){e.mask.getMask().one("click",s.close)}if(i.closeOnClick){e(document).on("click."+h,function(t){if(!e(t.target).parents(f).length){s.close(t)}})}if(i.closeOnEsc){e(document).on("keydown."+h,function(e){if(e.keyCode==27){s.close(e)}})}return s},close:function(t){if(!s.isOpened()){return s}t=t||e.Event();t.type="onBeforeClose";o.trigger(t);if(t.isDefaultPrevented()){return}l=false;n[i.effect][1].call(s,function(){t.type="onClose";o.trigger(t)});e(document).off("click."+h+" keydown."+h);if(c){e.mask.close()}return s},getOverlay:function(){return f},getTrigger:function(){return r},getClosers:function(){return a},isOpened:function(){return l},getConf:function(){return i}});e.each("onBeforeLoad,onStart,onLoad,onBeforeClose,onClose".split(","),function(t,n){if(e.isFunction(i[n])){e(s).on(n,i[n])}s[n]=function(t){if(t){e(s).on(n,t)}return s}});a=f.find(i.close||".close");if(!a.length&&!i.close){a=e('<a class="close"></a>');f.prepend(a)}a.click(function(e){s.close(e)});if(i.load){s.load()}}e.tools=e.tools||{version:"@VERSION"};e.tools.superpose={addEffect:function(e,t,r){n[e]=[t,r]},conf:{close:null,closeOnClick:true,closeOnEsc:true,closeSpeed:"fast",effect:"default",fixed:true,left:"center",load:false,mask:null,oneInstance:true,speed:"normal",target:null,top:"10%"}};var t=[],n={};e.tools.superpose.addEffect("default",function(t,n){var r=this.getConf(),i=e(window);if(!r.fixed){t.top+=i.scrollTop();t.left+=i.scrollLeft()}t.position=r.fixed?"fixed":"absolute";this.getOverlay().css(t).fadeIn(r.speed,n)},function(e){this.getOverlay().fadeOut(this.getConf().closeSpeed,e)});e.fn.superpose=function(n){var i=this.data("superpose");if(i){return i}if(e.isFunction(n)){n={onBeforeLoad:n}}n=e.extend(true,{},e.tools.superpose.conf,n);this.each(function(){i=new r(e(this),n);t.push(i);e(this).data("superpose",i)});return n.api?i:this}})(jQuery);(function(e){function n(t,n,r){var i=r.relative?t.position().top:t.offset().top,s=r.relative?t.position().left:t.offset().left,o=r.position[0];i-=n.outerHeight()-r.offset[0];s+=t.outerWidth()+r.offset[1];if(/iPad/i.test(navigator.userAgent)){i-=e(window).scrollTop()}var u=n.outerHeight()+t.outerHeight();if(o=="center"){i+=u/2}if(o=="bottom"){i+=u}o=r.position[1];var a=n.outerWidth()+t.outerWidth();if(o=="center"){s-=a/2}if(o=="left"){s-=a}return{top:i,left:s}}function r(r,i){var s=this,o=r.add(s),u,a=0,f=0,l=r.attr("title"),c=r.attr("data-cooltip"),h=t[i.effect],p,d=r.is(":input"),v=d&&r.is(":checkbox, :radio, select, :button, :submit"),m=r.attr("type"),g=i.events[m]||i.events[d?v?"widget":"input":"def"];if(!h){throw'Nonexistent effect "'+i.effect+'"'}g=g.split(/,\s*/);if(g.length!=2){throw"Tooltip: bad events configuration for "+m}r.on(g[0],function(e){clearTimeout(a);if(i.predelay){f=setTimeout(function(){s.show(e)},i.predelay)}else{s.show(e)}}).on(g[1],function(e){clearTimeout(f);if(i.delay){a=setTimeout(function(){s.hide(e)},i.delay)}else{s.hide(e)}});if(l&&i.cancelDefault){r.removeAttr("title");r.data("title",l)}e.extend(s,{show:function(t){if(!u){if(c){u=e(c)}else if(i.tip){u=e(i.tip).eq(0)}else if(l){u=e(i.layout).addClass(i.tipClass).appendTo(document.body).hide().append(l)}else{u=r.next();if(!u.length){u=r.parent().next()}}if(!u.length){throw"Cannot find cooltip for "+r}}if(s.isShown()){return s}u.stop(true,true);var d=n(r,u,i);if(i.tip){u.html(r.data("title"))}t=e.Event();t.type="onBeforeShow";o.trigger(t,[d]);if(t.isDefaultPrevented()){return s}d=n(r,u,i);u.css({position:"absolute",top:d.top,left:d.left});p=true;h[0].call(s,function(){t.type="onShow";p="full";o.trigger(t)});var v=i.events.cooltip.split(/,\s*/);if(!u.data("__set")){u.off(v[0]).on(v[0],function(){clearTimeout(a);clearTimeout(f)});if(v[1]&&!r.is("input:not(:checkbox, :radio), textarea")){u.off(v[1]).on(v[1],function(e){if(e.relatedTarget!=r[0]){r.trigger(g[1].split(" ")[0])}})}if(!i.tip)u.data("__set",true)}return s},hide:function(n){if(!u||!s.isShown()){return s}n=e.Event();n.type="onBeforeHide";o.trigger(n);if(n.isDefaultPrevented()){return}p=false;t[i.effect][1].call(s,function(){n.type="onHide";o.trigger(n)});return s},isShown:function(e){return e?p=="full":p},getConf:function(){return i},getTip:function(){return u},getTrigger:function(){return r}});e.each("onHide,onBeforeShow,onShow,onBeforeHide".split(","),function(t,n){if(e.isFunction(i[n])){e(s).on(n,i[n])}s[n]=function(t){if(t){e(s).on(n,t)}return s}})}e.tools=e.tools||{version:"@VERSION"};e.tools.cooltip={conf:{effect:"toggle",fadeOutSpeed:"fast",predelay:0,delay:30,opacity:1,tip:0,fadeIE:false,position:["top","center"],offset:[0,0],relative:false,cancelDefault:true,events:{def:"mouseenter,mouseleave",input:"focus,blur",widget:"focus mouseenter,blur mouseleave",cooltip:"mouseenter,mouseleave"},layout:"<div/>",tipClass:"cooltip"},addEffect:function(e,n,r){t[e]=[n,r]}};var t={toggle:[function(e){var t=this.getConf(),n=this.getTip(),r=t.opacity;if(r<1){n.css({opacity:r})}n.show();e.call()},function(e){this.getTip().hide();e.call()}],fade:[function(e){var t=this.getConf();if(!(navigator.userAgent.indexOf("MSIE")>=1)||t.fadeIE){this.getTip().fadeTo(t.fadeInSpeed,t.opacity,e)}else{this.getTip().show();e()}},function(e){var t=this.getConf();if(!(navigator.userAgent.indexOf("MSIE")>=1)||t.fadeIE){this.getTip().fadeOut(t.fadeOutSpeed,e)}else{this.getTip().hide();e()}}]};e.fn.cooltip=function(t){var n=this.data("cooltip");if(n){return n}t=e.extend(true,{},e.tools.cooltip.conf,t);if(typeof t.position=="string"){t.position=t.position.split(/,?\s/)}this.each(function(){n=new r(e(this),t);e(this).data("cooltip",n)});return t.api?n:this}})(jQuery);(function(e){function n(t){var n=e(window);var r=n.width()+n.scrollLeft();var i=n.height()+n.scrollTop();return[t.offset().top<=n.scrollTop(),r<=t.offset().left+t.width(),i<=t.offset().top+t.height(),n.scrollLeft()>=t.offset().left]}function r(e){var t=e.length;while(t--){if(e[t]){return false}}return true}var t=e.tools.cooltip;t.dynamic={conf:{classNames:"top right bottom left"}};e.fn.dynamic=function(i){if(typeof i=="number"){i={speed:i}}i=e.extend({},t.dynamic.conf,i);var s=e.extend(true,{},i),o=i.classNames.split(/\s/),u;this.each(function(){var t=e(this).cooltip().onBeforeShow(function(t,i){var a=this.getTip(),f=this.getConf();if(!u){u=[f.position[0],f.position[1],f.offset[0],f.offset[1],e.extend({},f)]}e.extend(f,u[4]);f.position=[u[0],u[1]];f.offset=[u[2],u[3]];a.css({visibility:"hidden",position:"absolute",top:i.top,left:i.left}).show();var l=e.extend(true,{},s),c=n(a);if(!r(c)){if(c[2]){e.extend(f,l.top);f.position[0]="top";a.addClass(o[0])}if(c[3]){e.extend(f,l.right);f.position[1]="right";a.addClass(o[1])}if(c[0]){e.extend(f,l.bottom);f.position[0]="bottom";a.addClass(o[2])}if(c[1]){e.extend(f,l.left);f.position[1]="left";a.addClass(o[3])}if(c[0]||c[2]){f.offset[0]*=-1}if(c[1]||c[3]){f.offset[1]*=-1}}a.css({visibility:"visible"}).hide()});t.onBeforeShow(function(){var e=this.getConf(),t=this.getTip();setTimeout(function(){e.position=[u[0],u[1]];e.offset=[u[2],u[3]]},0)});t.onHide(function(){var e=this.getTip();e.removeClass(i.classNames)});ret=t});return i.api?ret:this}})(jQuery)